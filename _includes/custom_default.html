{%- comment -%}
    Simplified include for feature/slider/hero sections.
    - All sizing/layout is now CSS-driven.
    - No more -2 class variants.
    - Only shape modifier is used for images.
{%- endcomment -%}

{%- assign mode = include.mode | default: 'slider' -%}
{%- assign slider_type = include.slider_type | default: 'box-images' -%}
{%- assign container_style = include.container_style
    | default: 'feature-style-1'
-%}

{%- assign item_base_class = 'custom-feature__item' -%}
{%- assign image_wrapper_class = 'custom-feature__image-wrapper' -%}
{%- assign description_wrapper_class = 'custom-feature__description-wrapper' -%}
{%- assign item_layout_modifier = '' -%}
{%- assign image_shape_modifier = '' -%}

{% if mode == 'hero' %}
    <!-- Hero Section -->
    <div class="hero-image-container">
        <img
            src="{{ include.image_url | relative_url }}"
            alt="{{ include.image_alt }}"
        >
        <div class="hero-text-overlay">
            <h1>{{ include.header_text }}</h1>
            <p>
                {{
                    include.paragraph_text
                    | replace: '\n', ' '
                    | strip_html
                    | strip
                    | escape
                }}
            </p>
            {% if include.button_href and include.button_text %}
                <a
                    href="{{ include.button_href }}"
                    class="btn btn--primary"
                    {% if include.button_href contains '://' %}
                        rel="nofollow noopener noreferrer"
                    {% endif %}
                >
                    {{ include.button_text }}
                </a>
            {% endif %}
        </div>
    </div>
{% else %}
    {% if container_style == 'feature-style-2' %}
        {%- assign image_shape_modifier = 'custom-feature__image--shape-rect' -%}
    {% else %}
        {%- assign item_layout_modifier = 'custom-feature__item--layout-desktop-row' -%}
        {%- assign image_shape_modifier = 'custom-feature__image--shape-round' -%}
    {% endif %}

    {% if mode == 'slider' %}
        <!-- Start of floating slider container -->
        <div class="floating-slider-container {{ slider_type }}">
    {% endif %}

    <!-- Feature Item -->
    <div class="{{ item_base_class }} {{ item_layout_modifier }} {{ container_style }}">
        <div class="{{ image_wrapper_class }}">
            <img
                class="custom-feature__image {{ image_shape_modifier }}"
                src="{{ include.image_url | relative_url }}"
                alt="{{ include.image_alt }}"
            >
        </div>
        <div class="{{ description_wrapper_class }}">
            <h3>{{ include.header_text }}</h3>
            <p>
                {{
                    include.paragraph_text
                    | replace: '\n', ' '
                    | strip_html
                    | strip
                    | escape
                }}
            </p>
            {% if include.button_href and include.button_text %}
                <a
                    href="{{ include.button_href }}"
                    class="btn btn--primary"
                    {% if include.button_href contains '://' %}
                        rel="nofollow noopener noreferrer"
                    {% endif %}
                >
                    {{ include.button_text | default: 'Learn more' }}
                </a>
            {% endif %}
        </div>
    </div>

    {% if mode == 'slider' %}
        <!-- End of floating slider container -->
        </div>
    {% endif %}
{% endif %}
